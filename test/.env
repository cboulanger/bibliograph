#
# Environment variables needed for developing and running tests in the
# dockerized development environment
#

# Database settings (from within the docker container)
DB_TYPE=mysql
DB_HOST=host.docker.internal
DB_PORT=3306
DB_DATABASE=tests
DB_USER=bibliograph
DB_PASSWORD=bibliograph
DB_ROOT_PASSWORD=bibliograph

# Turn on debug & test mode
YII_DEBUG=1
YII_ENV=test

# Build config
BUILD_CONFIG_FILE=compile.json
BUILD_VERBOSE=1
# Application config, APP_URL is set at runtime
APP_ENV_FILE=test/.env
APP_CONF_FILE=test/app.conf.toml
APP_NAME=bibliograph

# The PHP versions to test
PHP_TEST_VERSIONS="7.2 7.3 7.4 8.0"
#  Overridden by setting PHP_VERSION env var beforehand by the test script
PHP_VERSION="7.3"
# The port where apache serving this version is listening, overridden by test script
PHP_PORT="8$(printf %03d ${PHP_VERSION/\./})"
# The url of the application as loaded by the browser
APP_URL=http://localhost:$PHP_PORT/compiled/$BUILD_TARGET/$APP_NAME
# The url of the yii2 JSON-PRC endpoint from within the PHPFarm Docker instance
SERVER_URL=http://host.docker.internal:$PHP_PORT/test/codeception/web

# Module config
BIBUTILS_PATH=/usr/local/bin/
